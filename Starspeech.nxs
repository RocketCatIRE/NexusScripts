{"name":"starspeech","enabled":true,"description":"You have the conn","type":"group","id":1,"items":[{"type":"function","name":"onLoad","enabled":true,"id":2,"code":"ssp = typeof ssp != 'undefined' ? ssp : {}\n\nssp.class  = 'ssp'\nssp.inject = function(rule) { $('body').append('<div class=\"' + ssp.class + '\">&shy;<style>' + rule + '</style></div>') }\n\nssp.result = ''\n\nssp.init = function() {\n  $('#ssp-marker').remove()\n  window.SpeechRecognition = window.webkitSpeechRecognition || window.SpeechRecognition;\n    \n  var r = new window.SpeechRecognition()\n      r.lang = 'en-GB'\n      r.interimResults = false\n      r.maxAlternatives = 11\n      r.continuous = true\n    \n  r.onresult = (event) => {\n   let et = ''\n   console.log(event)\n   for (let i = event.resultIndex, len = event.results.length; i < len; i++) {\n     var t = event.results[i][0].transcript\n     if (event.results[i].isFinal) {\n       ssp.result += t\n     } else {\n       et += t\n     }\n   }\n   console.log(ssp.result + et)\n   send_direct(ssp.result + et)\n   ssp.result = ''\n  }\n  \n  r.onstart = function(e) {\n    console.log('Speech Recognition starting...')\n    $('#ssp-marker').addClass('active')   \n  }\n  r.onend   = function(e) {\n    console.log('Speech Recognition ending...')\n    console.log(ssp.result)\n    ssp.result = ''\n    $('#ssp-marker').removeClass('active')   \n  }\n  /*\n  r.onsoundstart = function() {\n    $('#ssp-activity').addClass('active')   \n  }\n  r.onsoundend = function() {\n    $('#ssp-activity').removeClass('active')   \n  }\n  */\n  r.onspeechend = function() {\n    console.log(ssp.result)   \n    ssp.result = ''\n    $('#ssp-activity').removeClass('active') \n  }\n  r.onspeechstart = function() {\n    $('#ssp-activity').addClass('active')\n  }\n  \n  // Give me an indicator\n  $('#tab_content_main_output').append('<div id=\"ssp-marker\"><div id=\"ssp-activity\"></div></div>')\n  $('.ssp').remove()\n  ssp.inject('#ssp-marker {position: absolute; z-index: 100; right: 11px; bottom: 8px; height: 30px; width: 30px; border-radius: 50%; background: rgba( 201, 45, 45, 0.55 ); }')\n  ssp.inject('#ssp-marker.active { background: rgba( 45, 133, 45, 0.45 ); }')\n  ssp.inject('#ssp-activity { position: absolute; left: 50%; top: 50%; transform: translate(-50%, -50%); height: 20px; width: 20px; background: rgba( 1, 1, 1, 0.11 ); border-radius: 50%; }')\n  ssp.inject('#ssp-activity.active { background: rgba( 55, 255, 55, 1 ); }')\n  \n  ssp.me = r\n}\n\nssp.start = function() {\n  ssp.me.start()   \n}\n\nssp.stop = function() {\n  ssp.me.stop()\n}\n\nssp.init()"},{"type":"alias","name":"-ssp","enabled":true,"id":3,"matching":"regexp","whole_words":true,"case_sensitive":true,"prefix_suffix":true,"actions":[{"action":"script","script":"ssp.start()"}],"text":"^\\-ssp$"}]}